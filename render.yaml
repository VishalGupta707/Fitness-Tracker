services:
  - type: web
    name: eureka-server
    runtime: docker
    dockerContext: Eureka
    dockerfilePath: Eureka/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

  - type: web
    name: config-server
    runtime: docker
    dockerContext: ConfigServer
    dockerfilePath: ConfigServer/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

      - key: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
        value: https://eureka-server-zwyv.onrender.com/eureka/

  - type: web
    name: api-gateway
    runtime: docker
    dockerContext: Gateway
    dockerfilePath: Gateway/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

      - key: SPRING_CONFIG_IMPORT
        value: optional:configserver:https://config-server-slvb.onrender.com
      - key: SPRING_CLOUD_CONFIG_NAME
        value: api-gateway
      - key: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: EUREKA_URL
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: FRONTEND_URL
        sync: false
      - key: SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_JWK_SET_URI
        value: https://dev-qkhn82xqsr4lxwh5.us.auth0.com/.well-known/jwks.json
      - key: SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI
        value: https://dev-qkhn82xqsr4lxwh5.us.auth0.com/

  - type: web
    name: user-service
    runtime: docker
    dockerContext: Fitness
    dockerfilePath: Fitness/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

      - key: SPRING_CONFIG_IMPORT
        value: optional:configserver:https://config-server-slvb.onrender.com
      - key: SPRING_CLOUD_CONFIG_NAME
        value: user-service
      - key: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: EUREKA_URL
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: DB_HOST
        sync: false
      - key: DB_PORT
        sync: false
      - key: DB_NAME
        sync: false
      - key: DB_USER
        sync: false
      - key: DB_PASS
        sync: false

  - type: web
    name: activity-service
    runtime: docker
    dockerContext: ActivityService
    dockerfilePath: ActivityService/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

      - key: SPRING_CONFIG_IMPORT
        value: optional:configserver:https://config-server-slvb.onrender.com
      - key: SPRING_CLOUD_CONFIG_NAME
        value: activity-service
      - key: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: MONGODB_URI
        sync: false
      - key: RABBITMQ_HOST
        sync: false
      - key: RABBITMQ_USERNAME
        sync: false
      - key: RABBITMQ_PASSWORD
        sync: false
      - key: RABBITMQ_VHOST
        sync: false

  - type: web
    name: ai-service
    runtime: docker
    dockerContext: AiService
    dockerfilePath: AiService/Dockerfile
    healthCheckPath: /actuator/health
    plan: free
    envVars:
      - key: JAVA_TOOL_OPTIONS
        value: "-Xmx300m -Xms300m"

      - key: SPRING_CONFIG_IMPORT
        value: optional:configserver:https://config-server-slvb.onrender.com
      - key: SPRING_CLOUD_CONFIG_NAME
        value: ai-service
      - key: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: EUREKA_URL
        value: https://eureka-server-zwyv.onrender.com/eureka/
      - key: MONGODB_URI
        sync: false
      - key: RABBITMQ_HOST
        sync: false
      - key: RABBITMQ_USERNAME
        sync: false
      - key: RABBITMQ_PASSWORD
        sync: false
      - key: RABBITMQ_VHOST
        sync: false
      - key: GEMINI_API_URL
        value: https://generativelanguage.googleapis.com
      - key: GEMINI_API_KEY
        sync: false

